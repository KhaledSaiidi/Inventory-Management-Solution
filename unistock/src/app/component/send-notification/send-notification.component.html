<ion-header>
  <ion-toolbar class="header-toolbar">
    <ion-buttons slot="start" (click) = "navigateTohome()">
      <ion-icon name="arrow-back" style="font-size: 30px;"></ion-icon>
    </ion-buttons>
    <ion-title class="header-title">UniStock Tracker</ion-title>
  </ion-toolbar>
  <div class="ion-page" id="main-content">
  </div>
</ion-header>

<ion-content fullscreen>
  <ion-card>
    <ion-card-header>
      <ion-card-title class="smaller-title">Notification Type</ion-card-title>
    </ion-card-header>
    <ion-card-content class="custom-card-content">
      <ion-item lines="none">
        <ion-label>Restock</ion-label>
        <ion-toggle slot="end" [(ngModel)]="isRestock" (ionChange)="handleRestockChange()"></ion-toggle>
      </ion-item>
      <ion-item lines="none">
        <ion-label>Complaint</ion-label>
        <ion-toggle slot="end" [(ngModel)]="isComplaint" (ionChange)="handleComplaintChange()"></ion-toggle>
      </ion-item>
    </ion-card-content>
  </ion-card>

  <ng-container *ngIf="isRestock">
    <form *ngIf="notifForm" [formGroup]="notifForm" (ngSubmit)="onSubmit()">
    <ion-card>
      <ion-card-header>
        <ion-card-title class="smaller-title">Restocking Request</ion-card-title>
      </ion-card-header>
      <ion-card-content class="custom-card-content">
        <ion-list>
          <ion-item>
            <ion-select placeholder="Select Stock" formControlName="stock" id="stock">
              <ion-select-option *ngFor="let stockref of stocksReferences">{{stockref}}</ion-select-option>
            </ion-select>
          </ion-item>
        
          <ion-item>
            <ion-select placeholder="Select Senior Advisor" formControlName="manager" id="manager">
              <ion-select-option *ngFor="let manager of managerList" [value]="manager.username">
                {{manager.firstName?.toUpperCase()}} - {{manager.lastName?.toUpperCase()}}
                </ion-select-option>
            </ion-select>
          </ion-item>
        
          <ion-item>
            <ion-input label="Quantity" formControlName="quantity" type="number"></ion-input>
          </ion-item>
        
          <ion-item>
            <ion-label position="stacked" style="font-size: 16px;" for="text">Comment</ion-label>
            <ion-textarea rows="3" placeholder="Write a comment" formControlName="text" id="text"></ion-textarea>
          </ion-item>
        </ion-list>
        <div class="ion-text-center">
          <ion-button type="submit" fill="outline" style="color: #37517e;">Request</ion-button>
          </div>    
              </ion-card-content>
    </ion-card>
  </form>
  </ng-container>

  <ng-container *ngIf="isComplaint">
    <form [formGroup]="notifFormC" (ngSubmit)="onSubmitC()">
    <ion-card>
      <ion-card-header>
        <ion-card-title class="smaller-title">Complaint</ion-card-title>
      </ion-card-header>
      <ion-card-content class="custom-card-content">
        <ion-list>        
          <ion-item>
            <ion-select placeholder="Select Manager" formControlName="managers" id="managers" multiple>
              <ion-select-option *ngFor="let manager of managerList" [value]="manager.username">
                {{manager.firstName?.toUpperCase()}} - {{manager.lastName?.toUpperCase()}}
              </ion-select-option>
            </ion-select>
          </ion-item>        
          <ion-item>
            <ion-label position="stacked" style="font-size: 16px;" for="complaintText">Comment</ion-label>
            <ion-textarea rows="6" formControlName="complaintText" id="complaintText" placeholder="Write a comment"></ion-textarea>
          </ion-item>
        </ion-list>
        <div class="ion-text-center">
          <ion-button fill="outline" type="submit" style="color: #37517e;">Send</ion-button>
          </div>    
              </ion-card-content>
    </ion-card>
</form>
  </ng-container>

  </ion-content>