{"version":3,"file":"ContentAlert.js","names":["React","Alert","AlertActionCloseButton","AlertGroup","AlertVariant","Msg","ContentAlert","Component","constructor","props","key","setState","alerts","state","filter","el","Date","getTime","variant","message","params","getUniqueId","push","localize","danger","setTimeout","hideAlert","instance","success","postAlert","warning","info","render","map"],"sources":["../../src/app/content/ContentAlert.tsx"],"sourcesContent":["/*\n * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as React from 'react';\nimport { Alert, AlertActionCloseButton, AlertGroup, AlertVariant } from '@patternfly/react-core';\nimport { Msg } from '../widgets/Msg';\n\ninterface ContentAlertProps { }\n\ninterface ContentAlertState {\n    alerts: {\n        key: number;\n        message: string;\n        variant: AlertVariant;\n    }[];\n}\nexport class ContentAlert extends React.Component<ContentAlertProps, ContentAlertState> {\n    private static instance: ContentAlert;\n\n    private constructor(props: ContentAlertProps) {\n        super(props);\n\n        this.state = {\n            alerts: []\n        };\n        ContentAlert.instance = this;\n    }\n\n    /**\n     * @param message A literal text message or localization key.\n     */\n    public static success(message: string, params?: string[]): void {\n        ContentAlert.instance.postAlert(AlertVariant.success, message, params);\n    }\n\n    /**\n     * @param message A literal text message or localization key.\n     */\n    public static danger(message: string, params?: string[]): void {\n        ContentAlert.instance.postAlert(AlertVariant.danger, message, params);\n    }\n\n    /**\n     * @param message A literal text message or localization key.\n     */\n    public static warning(message: string, params?: string[]): void {\n        ContentAlert.instance.postAlert(AlertVariant.warning, message, params);\n    }\n\n    /**\n     * @param message A literal text message or localization key.\n     */\n    public static info(message: string, params?: string[]): void {\n        ContentAlert.instance.postAlert(AlertVariant.info, message, params);\n    }\n\n    private hideAlert = (key: number) => {\n        this.setState({ alerts: [...this.state.alerts.filter(el => el.key !== key)] });\n    }\n\n    private getUniqueId = () => (new Date().getTime());\n\n    private postAlert = (variant: AlertVariant, message: string, params?: string[]) => {\n        const alerts = this.state.alerts;\n        const key = this.getUniqueId();\n        alerts.push({\n            key,\n            message: Msg.localize(message, params),\n            variant\n        });\n        this.setState({ alerts });\n\n        if (variant !== AlertVariant.danger) {\n            setTimeout(() => this.hideAlert(key), 8000);\n        }\n    }\n\n    public render(): React.ReactNode {\n        return (\n            <AlertGroup isToast aria-live=\"assertive\">\n                {this.state.alerts.map(({ key, variant, message }) => (\n                    <Alert\n                        aria-details={message}\n                        isLiveRegion\n                        variant={variant}\n                        title={message}\n                        actionClose={\n                            <AlertActionCloseButton\n                                title={message}\n                                variantLabel={`${variant} alert`}\n                                onClose={() => this.hideAlert(key)}\n                            />\n                        }\n                        key={key} />\n                ))}\n            </AlertGroup>\n        );\n    }\n}\n"],"mappings":"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"}